<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PayPal Card Field</title>
    <script src="https://www.paypal.com/sdk/js?client-id=test&components=buttons,hosted-fields"></script>
</head>
<body>
    <h1>PayPal Card Field Integration</h1>
    <form id="card-form">
        <div id="card-number"></div>
        <div id="card-expiry"></div>
        <div id="card-cvv"></div>
        <button type="submit" id="submit-button">Pay</button>
    </form>
    <script>
        paypal.HostedFields.render({
            createOrder: function () {
                return fetch('/create-order', { method: 'post' })
                    .then(res => res.json())
                    .then(data => data.orderID);
            },
            styles: {
                '.valid': { color: 'green' },
                '.invalid': { color: 'red' },
            },
            fields: {
                number: { selector: '#card-number', placeholder: 'Card Number' },
                expirationDate: { selector: '#card-expiry', placeholder: 'MM/YY' },
                cvv: { selector: '#card-cvv', placeholder: 'CVV' }
            }
        }).then(function (hostedFieldsInstance) {
            document.getElementById('card-form').addEventListener('submit', function (event) {
                event.preventDefault();
                hostedFieldsInstance.submit({
                    contingencies: ['3D_SECURE']
                }).then(function (payload) {
                    alert('Payment Authorized!');
                    console.log(payload);
                }).catch(err => console.error(err));
            });
        });
    </script>
</body>
</html>